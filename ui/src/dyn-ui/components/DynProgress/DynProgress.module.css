/**
 * DynProgress Component Styles
 * 100% Design Token Compliance
 * Unified Token Strategy: 3-Level Fallback Pattern
 */

.progress {
  /* ==========================================================================
     COMPONENT TOKENS (Layer 2)
     ========================================================================== */

  /* Color Tokens */
  --dyn-progress-bg: var(--dyn-progress-color-background, var(--dyn-semantic-surface-muted, #e5e7eb));
  --dyn-progress-fill: var(--dyn-progress-color-fill, var(--dyn-theme-primary, #3b82f6));
  --dyn-progress-text: var(--dyn-progress-color-text, var(--dyn-semantic-text, #1e293b));

  /* Sizing Tokens */
  --dyn-progress-height: var(--dyn-progress-size-height, 0.5rem);
  --dyn-progress-radius: var(--dyn-progress-size-borderRadius, var(--dyn-border-radius-full, 9999px));
  --dyn-progress-transition: var(--dyn-progress-animation-duration, var(--dyn-duration-normal, 200ms)) var(--dyn-easing-ease-in-out, ease-in-out);

  /* ==========================================================================
     BASE STYLES
     ========================================================================== */
  display: flex;
  flex-direction: column;
  gap: var(--dyn-spacing-xs, 0.25rem);
  width: 100%;
}

/* ==========================================================================
   HEADER STYLES
   ========================================================================== */

.progressHeader {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--dyn-spacing-sm, 0.5rem);
}

.progressLabel {
  font-size: var(--dyn-font-size-sm, 0.875rem);
  font-weight: var(--dyn-font-weight-medium, 500);
  color: var(--dyn-progress-text);
  line-height: var(--dyn-font-line-height-normal, 1.5);
}

.progressValue {
  font-size: var(--dyn-font-size-sm, 0.875rem);
  font-weight: var(--dyn-font-weight-semibold, 600);
  color: var(--dyn-progress-text);
  font-variant-numeric: tabular-nums;
}

/* ==========================================================================
   TRACK STYLES
   ========================================================================== */

.progressTrack {
  position: relative;
  width: 100%;
  height: var(--dyn-progress-height);
  background-color: var(--dyn-progress-bg);
  border-radius: var(--dyn-progress-radius);
  overflow: hidden;
}

/* ==========================================================================
   BAR STYLES
   ========================================================================== */

.progressBar {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  background-color: var(--dyn-progress-fill);
  border-radius: var(--dyn-progress-radius);
  transition: width var(--dyn-progress-transition);
}

/* ==========================================================================
   STATUS VARIANTS
   ========================================================================== */

.progressDefault {
  --dyn-progress-fill: var(--dyn-progress-color-default, var(--dyn-theme-primary, #3b82f6));
}

.progressSuccess {
  --dyn-progress-fill: var(--dyn-progress-color-success, var(--dyn-feedback-positive, #22c55e));
}

.progressError {
  --dyn-progress-fill: var(--dyn-progress-color-error, var(--dyn-feedback-negative-default, #ef4444));
}

.progressWarning {
  --dyn-progress-fill: var(--dyn-progress-color-warning, var(--dyn-feedback-warning, #f59e0b));
}

.progressInfo {
  --dyn-progress-fill: var(--dyn-progress-color-info, var(--dyn-feedback-info, #0ea5e9));
}

/* ==========================================================================
   SIZE VARIANTS
   ========================================================================== */

.progressXs {
  --dyn-progress-height: var(--dyn-progress-size-xs, 0.25rem);
}

.progressSm {
  --dyn-progress-height: var(--dyn-progress-size-sm, 0.375rem);
}

.progressMd {
  --dyn-progress-height: var(--dyn-progress-size-md, 0.5rem);
}

.progressLg {
  --dyn-progress-height: var(--dyn-progress-size-lg, 0.75rem);
}

.progressXl {
  --dyn-progress-height: var(--dyn-progress-size-xl, 1rem);
}

/* ==========================================================================
   INDETERMINATE ANIMATION
   ========================================================================== */

.progressIndeterminate .progressTrack {
  overflow: hidden;
}

.progressBarIndeterminate {
  width: 30% !important;
  animation: dynProgressIndeterminate 1.5s linear infinite !important;
  animation-duration: 1.5s !important;
  animation-iteration-count: infinite !important;
  will-change: transform;
}

@keyframes dynProgressIndeterminate {
  0% {
    transform: translateX(-100%);
  }

  100% {
    transform: translateX(400%);
  }
}

/* ==========================================================================
   STRIPED ANIMATION
   ========================================================================== */

.progressBarStriped {
  background-image: linear-gradient(45deg,
      rgba(255, 255, 255, 0.15) 25%,
      transparent 25%,
      transparent 50%,
      rgba(255, 255, 255, 0.15) 50%,
      rgba(255, 255, 255, 0.15) 75%,
      transparent 75%,
      transparent);
  background-size: var(--dyn-progress-stripe-size, 1rem) var(--dyn-progress-stripe-size, 1rem);
}


.progressBarAnimated {
  animation: dynProgressStripes 1s linear infinite !important;
  animation-duration: 1s !important;
  animation-iteration-count: infinite !important;
}

@keyframes dynProgressStripes {
  0% {
    background-position: var(--dyn-progress-stripe-size, 1rem) 0;
  }

  100% {
    background-position: 0 0;
  }
}

/* ==========================================================================
   ACCESSIBILITY
   ========================================================================== */

.srOnly {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* ==========================================================================
   REDUCED MOTION
   ========================================================================== */

/* Reduced motion block removed to ensure visibility aligned with DynLoading */

/* ==========================================================================
   HIGH CONTRAST MODE
   ========================================================================== */

@media (prefers-contrast: more) {
  .progressTrack {
    border: var(--dyn-border-width-sm, 1px) solid var(--dyn-semantic-border, #d1d5db);
  }
}

/* Dark mode handled automatically via semantic tokens */