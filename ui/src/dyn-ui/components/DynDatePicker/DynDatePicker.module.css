/**
 * DynDatePicker Component Styles
 * Design Token Compliance & Visual Calendar Grid
 */

.container {
  /* Component Tokens - 3-level fallback */
  --dyn-date-picker-bg: var(--dyn-date-picker-background, var(--dyn-semantic-input-bg, #ffffff));
  --dyn-date-picker-color: var(--dyn-date-picker-text, var(--dyn-semantic-text, #0f172a));
  --dyn-date-picker-border: var(--dyn-date-picker-border-color, var(--dyn-semantic-input-border, #e2e8f0));
  --dyn-date-picker-border-hover: var(--dyn-date-picker-border-hover-color, var(--dyn-neutral-mid-400, #94a3b8));
  --dyn-date-picker-border-focus: var(--dyn-date-picker-border-focus-color, var(--dyn-theme-primary, #3b82f6));
  --dyn-date-picker-focus-ring: var(--dyn-date-picker-focus-ring-color, var(--dyn-action-focus, rgba(59, 130, 246, 0.4)));
  --dyn-date-picker-placeholder: var(--dyn-date-picker-placeholder-color, var(--dyn-semantic-text-secondary, #64748b));
  --dyn-date-picker-disabled-bg: var(--dyn-date-picker-disabled-background, var(--dyn-semantic-surface-muted, #f1f5f9));
  --dyn-date-picker-readonly-bg: var(--dyn-date-picker-readonly-background, var(--dyn-semantic-surface, #f8fafc));

  --dyn-date-picker-radius: var(--dyn-date-picker-border-radius, var(--dyn-border-radius-md, 8px));
  --dyn-date-picker-padding-y: var(--dyn-date-picker-spacing-y, var(--dyn-spacing-sm, 8px));
  --dyn-date-picker-padding-x: var(--dyn-date-picker-spacing-x, var(--dyn-spacing-md, 12px));
  --dyn-date-picker-font-size: var(--dyn-date-picker-text-size, var(--dyn-font-size-sm, 14px));
  --dyn-date-picker-transition: var(--dyn-date-picker-animation, var(--dyn-transition-normal, 0.2s ease-in-out));

  position: relative;
  width: 100%;
}

.inputContainer {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
}

.input {
  flex: 1;
  width: 100%;
  height: var(--dyn-datePicker-input-height-md, 2.5rem);
  /* Reduced right padding to bring icons closer */
  padding: var(--dyn-date-picker-padding-y) 4.375rem var(--dyn-date-picker-padding-y) var(--dyn-date-picker-padding-x);
  font-family: inherit;
  font-size: var(--dyn-date-picker-font-size);
  color: var(--dyn-date-picker-color);
  background-color: var(--dyn-date-picker-bg);
  border: var(--dyn-border-width-sm, 1px) solid var(--dyn-date-picker-border);
  border-radius: var(--dyn-date-picker-radius);
  transition: all var(--dyn-date-picker-transition);
}

.input::placeholder {
  color: var(--dyn-date-picker-placeholder);
}

.input:focus {
  outline: none;
  border-color: var(--dyn-date-picker-border-focus);
  box-shadow: 0 0 0 var(--dyn-border-width-lg, 3px) var(--dyn-date-picker-focus-ring);
}

.input:disabled {
  background-color: var(--dyn-date-picker-disabled-bg);
  cursor: not-allowed;
  opacity: 0.6;
}

.input:read-only {
  background-color: var(--dyn-date-picker-readonly-bg);
}

/* Size Variants */
.sizeSm .input {
  height: var(--dyn-datePicker-input-height-sm, 2.25rem);
  font-size: var(--dyn-font-size-xs);
}

.sizeMd .input {
  height: var(--dyn-datePicker-input-height-md, 2.5rem);
  font-size: var(--dyn-font-size-sm);
}

.sizeLg .input {
  height: var(--dyn-datePicker-input-height-lg, 3rem);
  font-size: var(--dyn-font-size-md);
}

/* Input Actions (Clear, Calendar Icons) */
.inputActions {
  position: absolute;
  right: 0.5rem;
  /* Closer to edge */
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  align-items: center;
  gap: var(--dyn-spacing-2xs, 4px);
  /* Tighter gap */
}

.calendarIcon,
.clearButton {
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--dyn-date-picker-placeholder);
  cursor: pointer;
  transition: color var(--dyn-transition-fast);
}

.clearButton {
  background: none;
  border: none;
  padding: var(--dyn-spacing-xs);
  border-radius: var(--dyn-border-radius-sm);
  margin-right: var(--dyn-spacing-2xs);
}

.calendarIcon:hover,
.clearButton:hover {
  color: var(--dyn-date-picker-color);
}

.clearButton:focus-visible {
  outline: var(--dyn-border-width-md, 2px) solid var(--dyn-semantic-border-focus);
  outline-offset: var(--dyn-spacing-2xs, 2px);
}

/* ============================================
   CALENDAR DROPDOWN
   ============================================ */

.dropdown {
  width: var(--dyn-datePicker-calendar-width, 17.5rem);
  padding: var(--dyn-datePicker-calendar-padding, var(--dyn-spacing-md));
  background-color: var(--dyn-date-picker-bg);
  border: var(--dyn-border-width-sm, 1px) solid var(--dyn-date-picker-border);
  border-radius: var(--dyn-date-picker-radius);
  box-shadow: var(--dyn-elevation-medium);
}

/* Calendar Header (Month/Year Navigation) */
.calendarHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: var(--dyn-datePicker-calendar-headerHeight, 2.5rem);
  margin-bottom: var(--dyn-spacing-sm);
}

.headerSelectWrapper {
  display: flex;
  align-items: center;
  gap: var(--dyn-spacing-xs);
}

.headerSelect {
  font-family: inherit;
  font-size: var(--dyn-font-size-sm);
  font-weight: 600;
  color: var(--dyn-date-picker-color);
  background-color: transparent;
  border: none;
  border-radius: var(--dyn-border-radius-sm);
  cursor: pointer;
  padding: 2px 4px;
  line-height: inherit;
  transition: background-color var(--dyn-transition-fast);
}

.headerSelect:hover {
  background-color: var(--dyn-semantic-surface-hover);
}

.headerSelect:focus-visible {
  outline: var(--dyn-border-width-md, 2px) solid var(--dyn-semantic-border-focus);
}

.calendarTitle {
  font-size: var(--dyn-font-size-sm);
  font-weight: 600;
  color: var(--dyn-date-picker-color);
  text-transform: capitalize;
}

.navButton {
  display: flex;
  align-items: center;
  justify-content: center;
  width: var(--dyn-datePicker-nav-buttonSize, 2rem);
  height: var(--dyn-datePicker-nav-buttonSize, 2rem);
  padding: 0;
  background: none;
  border: none;
  border-radius: var(--dyn-border-radius-sm);
  color: var(--dyn-date-picker-color);
  cursor: pointer;
  transition: background-color var(--dyn-transition-fast);
}

.navButton:hover {
  background-color: var(--dyn-semantic-surface-hover);
}

.navButton:focus-visible {
  outline: var(--dyn-border-width-md, 2px) solid var(--dyn-semantic-border-focus);
  outline-offset: var(--dyn-spacing-2xs, 2px);
}

/* Weekday Headers */
.weekdays {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: var(--dyn-datePicker-calendar-gap, var(--dyn-spacing-2xs));
  margin-bottom: var(--dyn-spacing-xs);
}

.weekday {
  display: flex;
  align-items: center;
  justify-content: center;
  height: var(--dyn-datePicker-weekday-height, 2rem);
  font-size: var(--dyn-datePicker-weekday-fontSize, var(--dyn-font-size-xs));
  font-weight: 500;
  color: var(--dyn-datePicker-weekday-color, var(--dyn-semantic-text-secondary));
  text-transform: lowercase;
}

/* Calendar Grid */
.calendarGrid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: var(--dyn-datePicker-calendar-gap, var(--dyn-spacing-2xs));
}

/* Day Cell */
.day {
  display: flex;
  align-items: center;
  justify-content: center;
  width: var(--dyn-datePicker-day-size, 2.25rem);
  height: var(--dyn-datePicker-day-size, 2.25rem);
  font-size: var(--dyn-datePicker-day-fontSize, var(--dyn-font-size-sm));
  color: var(--dyn-datePicker-day-default-color, var(--dyn-semantic-text));
  background-color: var(--dyn-datePicker-day-default-bg, transparent);
  border: 2px solid transparent;
  border-radius: var(--dyn-datePicker-day-radius, var(--dyn-border-radius-sm));
  cursor: pointer;
  transition: all var(--dyn-datePicker-day-transition, var(--dyn-transition-fast));
}

.day:hover:not(.dayDisabled):not(.daySelected) {
  background-color: var(--dyn-datePicker-day-hover-bg, var(--dyn-semantic-surface-hover));
}

.day:focus-visible {
  outline: var(--dyn-border-width-md, 2px) solid var(--dyn-semantic-border-focus);
  outline-offset: var(--dyn-spacing-2xs, 2px);
}

/* Today */
.dayToday {
  border-color: var(--dyn-datePicker-day-today-borderColor, var(--dyn-theme-primary));
}

/* Selected Day */
.daySelected {
  background-color: var(--dyn-datePicker-day-selected-bg, var(--dyn-theme-primary));
  color: var(--dyn-datePicker-day-selected-color, var(--dyn-neutral-white));
  font-weight: 600;
}

/* Outside Current Month */
.dayOutside {
  color: var(--dyn-datePicker-day-outside-color, var(--dyn-semantic-text-tertiary));
}

/* Disabled Day */
.dayDisabled {
  opacity: var(--dyn-datePicker-day-disabled-opacity, 0.4);
  cursor: not-allowed;
  pointer-events: none;
}

/* Shortcuts (Today, Clear buttons) */
.shortcuts {
  display: flex;
  gap: var(--dyn-spacing-sm);
  margin-top: var(--dyn-spacing-sm);
  padding-top: var(--dyn-spacing-sm);
  border-top: var(--dyn-border-width-sm, 1px) solid var(--dyn-date-picker-border);
}

.shortcut {
  flex: 1;
  padding: var(--dyn-spacing-xs) var(--dyn-spacing-sm);
  font-size: var(--dyn-font-size-xs);
  color: var(--dyn-date-picker-color);
  background: none;
  border: var(--dyn-border-width-sm, 1px) solid var(--dyn-date-picker-border);
  border-radius: var(--dyn-border-radius-xs);
  cursor: pointer;
  transition: background-color var(--dyn-transition-fast);
}

.shortcut:hover {
  background-color: var(--dyn-semantic-surface-hover);
}

.shortcut:focus-visible {
  outline: var(--dyn-border-width-md, 2px) solid var(--dyn-semantic-border-focus);
  outline-offset: var(--dyn-spacing-2xs, 2px);
}

/* Relative Text ("Today", "Tomorrow", etc.) */
.relativeText {
  margin-top: var(--dyn-spacing-xs);
  font-size: var(--dyn-font-size-xs);
  color: var(--dyn-semantic-text-secondary);
}

/* ============================================
   RESPONSIVE
   ============================================ */

@media (max-width: 640px) {
  .input {
    font-size: var(--dyn-font-size-md);
    height: var(--dyn-datePicker-input-height-lg, 3rem);
  }

  .dropdown {
    width: 100%;
    padding: var(--dyn-spacing-sm);
  }
}

/* ============================================
   ACCESSIBILITY
   ============================================ */

@media (prefers-reduced-motion: reduce) {

  .input,
  .calendarIcon,
  .clearButton,
  .day,
  .navButton,
  .shortcut {
    transition: none;
  }
}

@media (prefers-contrast: high) {
  .input {
    border-width: var(--dyn-border-width-md, 2px);
  }

  .day {
    border-width: var(--dyn-border-width-lg, 3px);
  }

  .dayToday {
    border-width: var(--dyn-border-width-lg, 3px);
  }
}

/* ============================================
   DARK MODE
   Note: Handled automatically via semantic tokens!
   ============================================ */