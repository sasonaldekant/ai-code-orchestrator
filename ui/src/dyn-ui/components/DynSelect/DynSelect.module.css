/**
 * DynSelect Component Styles
 * 100% Design Token Compliance
 * Unified Token Strategy: 3-Level Fallback Pattern
 */

/* ================================================
   COMPONENT TOKENS (Layer 2)
   ================================================ */

:root {
  /* Color tokens */
  --dyn-select-bg: var(--dyn-select-color-background, var(--dyn-semantic-input-bg, #ffffff));
  --dyn-select-color: var(--dyn-select-color-text, var(--dyn-semantic-text, #0f172a));
  --dyn-select-border: var(--dyn-select-color-border, var(--dyn-semantic-input-border, #cbd5e1));
  --dyn-select-border-hover: var(--dyn-select-color-border-hover, var(--dyn-semantic-border-hover, #94a3b8));
  --dyn-select-border-focus: var(--dyn-select-color-border-focus, var(--dyn-theme-primary, #3b82f6));
  --dyn-select-focus-ring: var(--dyn-select-color-focus, var(--dyn-semantic-border-focus, #3b82f6));
  --dyn-select-placeholder: var(--dyn-select-color-placeholder, var(--dyn-semantic-text-secondary, #94a3b8));
  --dyn-select-disabled-bg: var(--dyn-select-color-disabled-background, var(--dyn-semantic-surface-muted, #f1f5f9));
  --dyn-select-readonly-bg: var(--dyn-select-color-readonly-background, var(--dyn-semantic-surface, #f8fafc));
  --dyn-select-error: var(--dyn-select-color-error, var(--dyn-feedback-negative-default, #dc2626));

  /* Layout tokens */
  --dyn-select-radius: var(--dyn-select-size-borderRadius, var(--dyn-border-radius-md, 0.375rem));
  --dyn-select-padding-y: var(--dyn-select-spacing-paddingY, var(--dyn-spacing-sm, 0.5rem));
  --dyn-select-padding-x: var(--dyn-select-spacing-paddingX, var(--dyn-spacing-md, 0.75rem));
  --dyn-select-font-size: var(--dyn-select-size-fontSize, var(--dyn-font-size-sm, 0.875rem));
  --dyn-select-transition: var(--dyn-select-animation-duration, var(--dyn-transition-normal, 0.2s)) var(--dyn-select-animation-easing, ease);
  --dyn-select-dropdown-max-height: var(--dyn-select-size-dropdownMaxHeight, 15rem);

  /* Height tokens per STYLE_REGISTRY.md (aligned with DynInput) */
  --dyn-select-height-sm: 32px;
  --dyn-select-height-md: 40px;
  --dyn-select-height-lg: 48px;
}

.container {
  position: relative;
  width: 100%;
}

.root {
  position: relative;
  width: 100%;
  font-family: inherit;
  font-size: var(--dyn-select-font-size);
  color: var(--dyn-select-color);
  background-color: var(--dyn-select-bg);
  border: var(--dyn-border-width-sm, 1px) solid var(--dyn-select-border);
  border-radius: var(--dyn-select-radius);
  cursor: pointer;
  transition: all var(--dyn-select-transition);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--dyn-select-padding-y) var(--dyn-select-padding-x);
  box-sizing: border-box;
  text-align: left;
  min-height: var(--dyn-select-height-md);
}

/* ================================================
   SIZE VARIANTS
   ================================================ */

.sizeSm {
  padding: var(--dyn-spacing-xs, 4px) var(--dyn-spacing-sm, 8px);
  font-size: var(--dyn-font-size-xs, 12px);
  min-height: var(--dyn-select-height-sm);
}

.sizeMd {
  padding: var(--dyn-select-padding-y) var(--dyn-select-padding-x);
  font-size: var(--dyn-select-font-size);
  min-height: var(--dyn-select-height-md);
}

.sizeLg {
  padding: var(--dyn-spacing-md, 16px) var(--dyn-spacing-lg, 24px);
  font-size: var(--dyn-font-size-md, 16px);
  min-height: var(--dyn-select-height-lg);
}

/* ================================================
   INTERACTIVE STATES
   ================================================ */

.root:hover:not(.disabled):not(.readonly) {
  border-color: var(--dyn-select-border-hover);
}

.root:focus {
  outline: none;
}

.focused,
.open {
  border-color: var(--dyn-select-border-focus);
  box-shadow: 0 0 0 var(--dyn-border-width-lg, 3px) var(--dyn-select-focus-ring);
}

.disabled {
  background-color: var(--dyn-select-disabled-bg);
  color: var(--dyn-select-placeholder);
  cursor: not-allowed;
  opacity: var(--dyn-opacity-disabled, 0.6);
}

.readonly {
  background-color: var(--dyn-select-readonly-bg);
  cursor: default;
}

.error {
  border-color: var(--dyn-select-error);
}

.error:focus,
.error.focused {
  box-shadow: 0 0 0 var(--dyn-border-width-lg, 3px) var(--dyn-select-error);
}

/* ================================================
   CONTENT
   ================================================ */

.content {
  flex: 1;
  display: flex;
  align-items: center;
  gap: var(--dyn-spacing-xs, 4px);
  overflow: hidden;
}

.text {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.placeholder {
  color: var(--dyn-select-placeholder);
}

.tags {
  display: flex;
  flex-wrap: wrap;
  gap: var(--dyn-spacing-xxs, 2px);
}

.tagBadge {
  max-width: 150px;
}

.tagRemove {
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  opacity: 0.6;
  transition: opacity var(--dyn-transition-fast, 0.1s);
  padding: 2px;
  margin: -2px;
}

.tagRemove:hover {
  opacity: 1;
}

/* ================================================
   ACTIONS
   ================================================ */

.actions {
  display: flex;
  align-items: center;
  gap: var(--dyn-spacing-xs, 4px);
  flex-shrink: 0;
}

.arrow {
  color: var(--dyn-select-placeholder);
  transition: transform var(--dyn-transition-fast, 0.1s);
}

.arrowUp {
  transform: rotate(180deg);
}

/* ================================================
   SEARCH
   ================================================ */

.search {
  padding: var(--dyn-spacing-sm, 8px) var(--dyn-spacing-md, 16px);
  border-bottom: var(--dyn-border-width-sm, 1px) solid var(--dyn-semantic-border-subtle, #e2e8f0);
}

.searchWrapper {
  position: relative;
  display: flex;
  align-items: center;
  width: 100%;
}

.searchIcon {
  position: absolute;
  left: var(--dyn-spacing-sm, 8px);
  color: var(--dyn-select-placeholder);
  pointer-events: none;
}

.searchInput {
  width: 100%;
  padding: var(--dyn-spacing-xs, 4px) var(--dyn-spacing-sm, 8px) var(--dyn-spacing-xs, 4px) var(--dyn-spacing-xl, 32px);
  border: var(--dyn-border-width-sm, 1px) solid var(--dyn-semantic-border, #cbd5e1);
  border-radius: var(--dyn-border-radius-sm, 4px);
  font-size: var(--dyn-font-size-sm, 14px);
  outline: none;
  background-color: var(--dyn-semantic-input-bg, #ffffff);
  color: var(--dyn-semantic-text, #0f172a);
  transition: all var(--dyn-transition-fast, 0.1s);
}

.searchInput:focus {
  border-color: var(--dyn-select-border-focus);
}

/* ================================================
   OPTIONS DROPDOWN
   ================================================ */

.options {
  max-height: var(--dyn-select-dropdown-max-height);
  overflow-y: auto;
  padding: var(--dyn-spacing-xs, 4px) 0;
  background-color: var(--dyn-select-bg);
}

.optionContent {
  display: flex;
  align-items: center;
  gap: var(--dyn-spacing-sm, 8px);
  width: 100%;
}

.checkboxWrapper {
  display: flex;
  align-items: center;
  pointer-events: none;
}

.option {
  width: 100%;
  padding: var(--dyn-spacing-sm, 8px) var(--dyn-spacing-md, 16px);
  cursor: pointer;
  border: none;
  background: none;
  font-size: var(--dyn-select-font-size);
  text-align: left;
  color: var(--dyn-select-color);
  transition: background-color var(--dyn-transition-fast, 0.1s);
  display: flex;
  align-items: center;
  font-family: inherit;
}

.option:hover:not(.optionDisabled) {
  background-color: var(--dyn-semantic-surface-muted, #f1f5f9);
}

.optionSelected {
  background-color: var(--dyn-semantic-surface-selected, #e2e8f0);
  color: var(--dyn-semantic-text, #0f172a);
  font-weight: var(--dyn-font-weight-medium, 500);
}

/* ================================================
   DARK MODE
   Note: Handled automatically via semantic tokens!
   ================================================ */
